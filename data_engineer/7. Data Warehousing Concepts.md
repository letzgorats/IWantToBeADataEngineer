# 데이터 웨어하우스 개념 

## 데이터 웨어하우스 라이프사이클
- 데이터 웨어하우스 프로젝트는 3가지 주요 단계로 구성된다.
  1) 계획 단계(Planning) : 요구사항 수집 및 데이터 모델링을 통해 데이터 웨어하우스의 구조를 정의한다.

     1-1) 요구사항 수집
      - data analyst : 비즈니스와 협업해 의사결정을 지원한다.
      - data scientist : 머신러닝 모델로 프로세스를 자동화하고 효율을 개선한다.

     1-2) 데이터 모델링
      - data engineer : 데이터 파이프라인을 설계한다.
      - database admin : 트랜잭션 데이터베이스를 관리한다.
      - data analyst & data scientist : 데이터 모델이 비즈니스 목표에 부합하는지 확인한다.
     
  3) 구현 단계(Implementation) : ETL(Extract, Transform, Load) 프로세스 설계 및 BI(Business Intelligence) 애플리케이션 개발을 한다.

     2-1) ETL 설계 및 개발
       - data engineer : 데이터 파이프라인을 구축한다.
       - database admin : 데이터 소스에서의 데이터 추출을 지원한다.

     2-2) BI 애플리케이션 개발
       - data analyst & data scientist : BI 도구 설정에 자문을 제공한다.
    
  5) 지원 및 유지보수 단계(Support & Maintenance) : 데이터 웨어하우스 업데이트, 테스트 및 배포를 진행한다.

     3-1) 유지보수
       - data engineer : 유지보수 및 업데이트를 실행한다.

     3-2) 테스트 및 배포
       - data analyst & data scientist : 시스템이 요구사항을 충족하는지 테스트한다.
       - data engineer : 시스템을 배포하고 조직에서 사용가능하게 한다.

  -> 주요 변경사항이 생기면 다시 계획단계(Planning)로 돌아간다.


## 각 단계별 주요 역할
1) 데이터 분석가 & 데이터 사이언티스트
  - 비즈니스 요구사항을 수집하고 BI 도구 설정을 지원한다.
2) 데이터 엔지니어 & 데이터베이스 관리자(admin)
  - 데이터 파이프라인을 구축하고, 원천 시스템에서 데이터 추출을 담당한다.

<hr>

## 데이터 웨어하우스 vs 데이터 레이크 vs 데이터 마트 

1) 데이터 베이스(Database)
     - 테이블(행과 열) 형태로 정보를 저장하는 구조화된 시스템이다.
     - 조직 내 트랜잭션 데이터를 저장하는 용도로 사용한다.
     - (ex) 고객 구매 정보를 저장한다.
     - 한계 : 대규모 분석 쿼리 수행 시 속도가 느려지고, 트랜잭션 처리 성능에 영향을 줄 수 있다.

2) 데이터 웨어하우스(Data Warehouse)
     - 조직의 **여러부서** 에서 **데이터를 통합** 하여 중앙 집중식 분석이 가능하도록 구축된 저장소이다.
     - **다양한 데이터 소스** (여러 데이터베이스, 로그 파일 등)에서 데이터를 수집한다.
     - ETL(Extract, Transform, Load) 프로세스를 통해 데이터를 구조화된 테이블 형태로 저장한다.
     - **100GB 이상으로 대규모 데이터 저장** 이 가능하다.
     - **구조 변경이 어렵고** , **upstream 및 downstream effect** 가 크다.
       (Upstream effects are those that occur before a product or service is used,
       while downstream effects are those that occur after a product or service is used.)

3) 데이터 마트(Data Mart)
     - 특정부서(ex.재무팀, 마케팅팀)에서 사용할 데이터만 저장하는 관계형 데이터베이스
     - 데이터 웨어하우스처럼 **구조화된 데이터를 저장** 하지만, **한 부서의 데이터만 포함** 한다.
     - 입력 데이터 소스가 적다.(주로 데이터 웨어하우스의 일부 데이터를 활용한다.)
     - 크기는 일반적으로 100GB 이하로, 데이터웨어하우스보다 작다.

4) 데이터 레이크(Data Lake)
     - 데이터 웨어하우스처럼 조직 전체 데이터를 저장하지만, **비정형 데이터(영상, 오디오, 이미지 등)도 저장** 할 수 있다.
     - 여러 부서의 데이터를 저장하며, **다양한 데이터 소스를 수용** 한다.
     - **데이터의 구조를 사전에 정의할 필요 없이** **유연하게 저장** 이 가능하다.
     - **데이터 활용 목적이 명확하지 않은 경우** 에도, 미래 분석을 위해 **데이터 보관이 가능** 하다.
     - **데이터 웨어하우스보다 유연한 구조를 가지며, 변경이 용이하다.**
  
   ![Image](https://github.com/user-attachments/assets/845b7168-0f87-4f60-9003-3bc328daa71d)

<hr>

## 데이터 웨어하우스 아키텍처와 4가지 레이어 
- 데이터 웨어하우스(Data Warehouse)는 **비즈니스 의사결정을 지원하기 위해 데이터를 **수집,저장,분석** 하는 시스템이다.
- 일반적으로 데이터웨어하우스는 **4가지 주요 레이어** 로 구성된다.

## 1. 데이터 소스 레이어(Data Source Layer)
- 데이터 웨어하우스의 첫 번째 단계로, **다양한 데이터 소스에서 데이터를 가져오는 역할** 을 한다.
- 주요 데이터 소스
    - 트랜잭션 데이터베이스 : 기업의 운영 시스템(ex.ERP, CRM, POS 시스템 등)
    - 파일 데이터 : CSV, JSON, XML 등
    - 기타 데이터 : 로그 데이터, 센서 데이터 등 구조적/비구조적 데이터

## 2. 데이터 스테이징 레이어(Data Staging Layer)
- **데이터를 변환하고 정제** 하는 단계로, ETL(Extract,Transform,Load) 프로세스를 포함한다.
    - ETL 프로세스
        1. Extract(추출) : 원본 데이터 소스에서 데이터를 가져온다.
        2. Transform(변환) : 데이터 정제, 비즈니스 규칙 적용, 포맷 변환 등을 수행한다.
        3. Load(적재) : 변환된 데이터를 데이터 웨어하우스에 저장한다.
     
- 스테이징 레이어에서는 데이터를 **임시 테이블(Stageing Table)** 에 저장하여 다음 단계에서 사용할 수 있도록 준비한다.

## 3. 데이터 저장 레이어(Data Storage Layer)
- **데이터를 장기적으로 저장** 하는 공간으로, 데이터 웨어하우스와 데이터 마트(Data Mart)로 구성된다.
    - 데이터 저장 방식
        - **데이터 웨어하우스 -> 데이터 마트** : 데이터가 먼저 웨어하우스에 저장된 후 특정 목적에 맞게 데이터 마트로 이동한다.
        - **데이터 마트 -> 데이터 웨어하우스** : 데이터 마트에서 특정 데이터를 먼저 저장하고 이후 웨어하우스로 통합된다.
    - * 데이터 마트(Data Mart)란?
          - 특정 부서나 목적(ex.마케팅, 인사, 영업)에 맞춰 세분화된 데이터 저장소
          - 성능 최적화 및 빠른 조회를 위해 활용된다.

## 4. 데이터 프레젠테이션 레이어(Data Presentation Layer)
- **사용자가 데이터를 조회하고 분석** 하는 단계로, 비즈니스 인텔리전스(BI)도구를 활용해 데이터를 시각화하고 인사이트를 도출할 수 있다.
    - 데이터 분석 도구
        - BI 툴 : PowerBI, Tableau, Looker 등
        - 데이터 마이닝 도구 : 머신러닝 기반 분석 활용
        - SQL 쿼리 : 직접 데이터 조회 및 분석

- 사용자는 대시보드, 그래프, 차트 등을 통해 데이터를 쉽게 이해하고, 의사결정에 활용할 수 있다.

<hr>

## 데이터 웨어하우스 프레젠테이션 레이어와 주요 도구 정리
- 데이터 웨어하우스의 **프레젠테이션 레이어(Presentation Layer)** 는 사용자가 데이터를 조회하고 분석하는 최종 단계이다. 이 단계에서는 다양한 도구를 활용하여 데이터를 시각화하고 인사이트를 도출할 수 있다. 프레젠테이션 레이어에서 사용되는 도구들은 크게 **3가지 그룹** 으로 나뉜다.

1. 자동화된 보고 및 대시보드 도구 : Tableau, Power BI 등을 사용해 시각적으로 데이터를 분석한다.
2. BI/데이터 분석 도구 : RapidMiner, KNIME 등을 활용해 패턴을 발견하고 인사이트를 도출한다.
3. SQL을 활용한 직접 쿼리 도구 : SQL, Python, R을 사용하여 맞춤형 데이터 분석을 수행한다.

## 1. 자동화된 보고 및 대시보드 도구(Automated Reporting & Dashboarding)
- 역할
    - 데이터를 자동으로 수집하여 보고서(Reports) 및 대시보드(Dashboard)를 생성한다.
    - 기업 내 데이터 통합을 통해 빠르고 정확한 의사결정을 지원한다.
 
- 주요 특징
    - 데이터를 한 곳에서 관리하여 **분석가** 들이 효율적으로 정보에 접근이 가능하다.
    - 보고서 자동화 기능을 통해 시간 절약 및 실시간 정보 제공이 가능하다.
    - 주 사용자는 **분석가, 일반 사용자들** 이다.

- 대표적인 도구

    ![Image](https://github.com/user-attachments/assets/7e3b9b3c-7753-424f-849b-7008694bcf30)
    - Tableau : 대시보드 시각화 및 분석
    - Power BI : Microsoft의 BI 솔루션
    - Google Looke : 클라우드 기반 데이터 시각화 도구
    - SAP BW : 대기업에서 많이 사용하는 데이터 웨어하우스 솔루션
 
- 활용 예시(ex)
    - 기업의 **매출 보고서** 를 자동으로 생성하여 실시간으로 확인 가능하다.
    - 마케팅팀이 특정 캠페인의 성과를 분석하고  **대시보드에서 시각적으로  확인** 한다.
 
## 2. BI 및 데이터 분석 도구(BI/Data Analytics) 
- 역할
    - **데이터 탐색 및 패턴 발견** 을 통해 기업의 전략 수립을 지원한다.
    - 데이터에서 인사이트를 도출하여 **비즈니스 의사결정에 도움** 을 준다.

- 주요 특징
    - **데이터 마이닝(Data Mining)** 기능을 제공하여 **트렌드 및 패턴 분석** 이 가능하다.
    - GUI 기반의 드래그 앤 드롭(Drag & Drop) 인터페이스 제공 (코딩 없이 분석 가능)
    - 필요 시 Python, R 등의 코드 기반 분석 기능도 제공한다.
    - 주 사용자는 **분석가, 데이터 사이언시트스** 이다.

- 대표적인 도구
  
    ![Image](https://github.com/user-attachments/assets/1d60bdb8-c55d-495a-8e51-a402c331f089)
    - Oracle Data Mining : 오라클 데이터베이스와 연동하여 데이터 분석을 한다.
    - RapidMiner : 머신러닝 및 데이터 마이닝을 지원한다.
    - Alteryx : 데이터 준비 및 분석 자동화한다.
    - KNIME : 오픈소스 데이터 분석 및 머신러닝 도구이다.

- 활용 예시(ex)
    - **매출 데이터에서 특정 지역의 매출 감소 원인을 분석** 한다.
    - **고객 구매 패턴을 분석하여 맞춤형 마케팅 전략 수립** 을 한다.

## 3. SQL을 활용한 직접 쿼리 도구(Direct Queries)
- 역할
    - 사용자가 **SQL을 직접 작성** 하여 데이터 웨어하우스에서 데이터를 추출한다.
    - **맞춤형 분석을 수행** 하고 **필요한 데이터만 필터링** 이 가능하다.

- 주요 특징
    - **기술적 역량이 있는 사용자(데이터 엔지니어, 데이터 사이언티스트)** 가 주로 사용한다.
    - 보다 정밀한 데이터 분석 및 조작이 가능하다.
    - Python, R 과 같은 프로그래밍 언어와 결합하여 **고급 분석 및 머신러닝 적용이 가능** 하다.
    - 주 사용자는 **분석가, 데이터 사이언티스트, 데이터 엔지니어** 이다.

- 대표적인 도구

    ![Image](https://github.com/user-attachments/assets/9a1b2753-482a-4e26-a1be-e618deb64fea)   
    - SQL Server Management Studio(SSMS) : Microsoft SQL Server 관리 도구
    - Azure Data Studio : 클라우드 환경에서 SQL 분석 지원하는 도구
    - Python & R : 데이터 분석 및 머신러닝을 위한 프로그래밍 언어

- 활용 예시(ex)
    - **특정 고객군의 구매 데이터를 SQL로 직접 추출하여 머신러닝 모델을 생성** 한다.
    - **R을 사용하여 판매 데이터의 이상치(Outlier)** 를 감지 및 분석한다.

=> 프레젠테이션 레이어는 **데이터 웨어하우스의 최종 사용자 인터페이스** 로, 비즈니스 의사결정에 핵심적인 역할을 한다.

<hr>

## 데이터 웨어하우스 아키텍처 
- 데이터 웨어하우스(Data Warehouse,DW)는 데이터를 수집, 저장, 분석하는 시스템이며, 이를 구축하는 방식에는 **Inmon(탑다운, Top-down)과 Kimball(바텀업,Bottom-up)** 두 가지 대표적인 아키텍처가 있다.

## 1. Inmon 의 Top-down 방식
- 개념
    - Bill Inmon이 제안한 데이터 웨어하우스 설계 방식이다.
    - 데이터를 **중앙 집중형 웨어하우스에서 먼저 정규화(Normalization)하여 저장한 후** , **부서별 데이터 마트(Data Mart)로 전달** 한다.
![Image](https://github.com/user-attachments/assets/a453ecf4-47ee-4f81-88b3-a78dee4b68c4)

- 특징
    - 모든 데이터의 표준화가 필요
        - 데이터를 웨어하우스로 이동하기 전에 **데이터 정의, 명명 규칙, 정합성 기준** 등을 조직 전체가 합의해야 한다.
    - 정규화된 데이터 저장 구조
        - **데이터 정규화(Normalization)** 을 통해 데이터 중복을 최소화하고 데이터 품질을 향상시킨다.
    - 데이터 마트는 웨어하우스에서 파생
        - 데이터는 **먼저 웨어하우스에 저장** 되고, 이후 부서별 **데이터 마트(Data Mart)로 이동** 한다.

- 장점(Pros)
    1. **데이터의 일관성과 신뢰성을 보장** 한다.
        - 모든 데이터를 표준화하여 **기업 내 단일 진실(Single Source of Truth, SSOT)** 을 유지한다.
    2. **데이터 중복을 최소화** 한다.
        - **정규화된 데이터로 저장** 되어 **불필요한 데이터 중복이 줄어든다.**
    3. **데이터 마트 확장이 용이** 하다.
        - **표준화된 데이터를 기반** 으로 **데이터 마트를 손쉽게 추가** 할 수 있다.

- 단점(Cons)
    1. **데이터 조회 속도가 느릴 수 있다.**
        - **정규화로 인해 많은 JOIN 연산이 필요** 하여 보고서 생성 시 **성능 저하가 발생할 수 있다.** 
    2. **초기 구축 비용이 높다.**
        - **전체 데이터를 표준화**해야 하므로 **설계 및 정합성 확보에 많은 시간과 비용** 이 소요된다. 

## 2. Kimball 의 Bottom-up 방식
- 개념
    - Ralph Kimball이 제안한 방식으로, **데이터를 먼저 비정규화(Denormalization)** 한 후, **데이터 마트를 구축하여 빠르게 보고서 및 분석이 가능** 하게 한다.
    - **스타 스키마(Star Schema)** 를 사용하여 **데이터 쿼리 속도를 최적화** 한다.
![Image](https://github.com/user-attachments/assets/bb158604-ee26-4e17-b0a7-c7a320f0f0c8)

- 특징
    - 빠른 데이터 분석 가능
        - 데이터를 부서별로 정리하여 **각 부서의 데이터 마트(Data Mart)를 먼저 구축** 한 후, **웨어하우스로 통합** 한다.
    - 데이터 구조를 단순화하여 쿼리 실행 속도를 빠르게 함
        - 데이터 구조를 단순화하여 **쿼리 실행 속도를 빠르게 한다.**
    - 부서 단위 확장 가능
        - 한 부서의 데이터 마트를 구축한 후, **다른 부서로 확장하는 방식** 이다.

- 장점(Pros)
    1. **빠른 구축이 가능** 하다.
        - **부서별 데이터 마트를 먼저 구축하고 확장하는 방식** 이므로 **초기 구축 비용이 적고, 빠르게 적용이 가능** 하다.
    2. **쿼리 속도를 향상** 시킬 수 있다.
        - **비정규화된 데이터 구조 덕분** 에 **JOIN 연산이 적고** **보고서 생성속도가 빠르다.**
    3. **유연한 확장성** 을 갖춘다.
        - **필요에 따라 부서별로 데이터 마트를 추가** 할 수 있다.
        
- 단점(Cons)
    1. **ETL 프로세스 시간을 증가** 시키고 **데이터 중복 발생** 이 나타날 수 있다.
        - **비정규화된 데이터 모델** 이므로 **ETL 프로세스 시간을 늘어날** 수 있고, **여러 데이터 마트에서 중복된 데이터가 발생할 위험이 있다.** 
    2. **데이터 정합성 문제** 가 나타날 수 있다.
        - 동일한 데이터(중복 데이터)가 여러 데이터 마트에서 다르게 계산될 가능성이 있어 **기업의 단일 진실(SSOT)를 유지하기 어렵다.**
        - (ex) 동일한 이름을 가진 'revenu'라는 필드가 두 개의 데이터마트에 있고, 한 데이터 마트에서는 상품비용으로 계산되는데, 다른 데이터마트에서는 그러지 않는 경우
    3. **장기적인 관리 비용이 증가** 할 수 있다.
        - **새로운 부서를 추가할 때마다 추가적인 개발과 데이터 통합 작업이 필요** 하다.

## 데이터 웨어하우스 아키텍처는 기업의 목표와 데이터 활용 방식에 따라 적절한 모델을 선택하는 것이 중요하다.
![Image](https://github.com/user-attachments/assets/086f6ddb-169e-44ef-801a-3cc1a4a1e5eb)
- **기업이 장기적인 데이터 품질과 일관성을 중요하게 여긴다면, Inmon(Top-Down) 방식이 적합**하다.
- **빠른 데이터 분석과 유연한 확장이 필요하다면, Kimball(Bottom-Up) 방식이 적합**하다.

<hr>

## OLAP vs OLTP : 데이터 웨어하우스에서의 차이점과 개념 정리
- 데이터 웨어하우스에서 중요한 개념 중 하나는 **OLAP(Online Analytical Processing)** 과 **OLTP(Online Transaction Processing)** 이다.
- 이 두 개념은 데이터 처리 방식이 다르며, **분석용(OLAP) vs 트랜잭션 처리용(OLTP)** 로 구분된다.

## 1. OLAP(OnLine Analytical Processing) 시스템
- OLAP는 **대용량 데이터를 고속으로 다차원 분석** 할 수 있도록 설계된 시스템이다.
- 주로 **데이터 웨어하우스(Data Warehouse) 및 데이터 마트(Data Mart)** 에서 활용된다.
- 다차원 분석을 수행하여 **데이터의 패턴과 트렌드를 파악하는데 사용** 된다.
- 주로, 데이터 사이언티스트나, 데이터 분석가, 경영진 및 의사결정자들이 사용하여 작업한다.

### OLAP 의 핵심개념 : 다차원 분석(Multidimensional Analysis)
- 데이터 웨어하우스의 데이터는 **행(row)과 열(column)** 형태로 저장된다. => **2차원 표현**
- OLAP 시스템은 이를 **다차원(Multidimensional) 형태로 변환** 하여 분석 성능을 향상시킨다.
- 이러한 다차원 형식을 사용하면, 데이터 분석 시 **슬라이싱(Slicing)과 다이싱(Dicing)** 기능을 활용할 수 있다.

### OLAP 의 핵심요소 : OLAP 데이터 큐브(OLAP Data Cube)
- OLAP 큐브란
    - OLAP 시스템에서 데이터를 빠르게 조회하기 위해 사용하는 **다차원 데이터 모델** 이다.
    - **3차원 이상** 의 데이터를 저장하여 여러 차원에서 분석이 가능하다.

- OLAP 큐브 예제
  ![Image](https://github.com/user-attachments/assets/e5caeacd-888c-48d9-8ac5-e464bf7447c3)
    - 신용카드 회사의 매출 분석
        - 차원(Dimension) : 지역(Region), 연도(Year), 제품(Product)
        - 값(Measures) : 총 매출(Total Sales)
    - **높이, 너비, 길이는 이러한 차원 중 하나** 를 나타내고, **모서리가 교차하는 차원에 대한 총 매출** 을 얻게 된다.

    - OLAP 큐브를 활용하여 **각 차원별로 데이터를 집계(Aggregation) 및 분석** 할 수 있다.

- OLAP 큐브의 확장 : **하이퍼 큐브(Hypercube)**
    - **3차원 이상** 으로 확장된 데이터 모델이다.
    - **보다 복잡한 데이터 분석에 활용** 된다.

### 예시
- 매출 데이터 분석 : 국가 -> 주(도) -> 도시 등 계층 구조로 데이터를 분석한다.
- 시간 기준 분석 : 연도 -> 월 -> 일별로 판매량을 비교한다.
- 제품별 분석 : 특정 제품군의 지역별 판매량을 비교한다.


## 2. OLTP(OnLine Transaction Processing) 시스템
- OLTP는 **온라인 트랜잭션을 빠르게 처리** 하는 시스템이다.
- 은행, 전자상거래, 예약 시스템 등 **실시간 데이터 입력/수정/삭제 가 빈번한 환경** 에서 사용한다.

### OLTP 의 특징
- **단순한 데이터 처리(INSERT,UPDATE,DELETE 연산)**
- **빠른 응답 속도**
- **소수의 행(Row)에 대한 변경 처리** : 데이터베이스 내의 몇몇 데이터 행에만 영향을 미치는 경우를 말하는게 많다.
- 비즈니스에 필수적이지만, 분석에는 사용되지 않고 **실시간 데이터 저장소 역할** 을 하거나 데이터베이스나 데이터 웨어하우스에 데이터를 공급하는 소스 시스템에서 이를 사용한다.
- 주로, 데이터 엔지니어나, 데이터베이스 관리자들이 사용하여 작업한다.

### 예시
- ATM 거래 처리
- 온라인 쇼핑몰 결제 시스템
- 항공사 예약 시스템

### OLTP 시스템이 중요한 이유는?
- 기업의 운영을 실시간으로 지원하는 **핵심 시스템** 이기 때문이다.
- **빠른 데이터 입력과 처리가 가능** 하게 한다.

## OLAP vs OLTP 비교
![Image](https://github.com/user-attachments/assets/5e41dbc3-f5ef-49bb-877b-8df0549755fe)

- OLTP 시스템 -> 데이터 웨어하우스 -> OLAP 시스템
    - OLTP 시스템이 생성한 데이터를 데이터 웨어하우스에 저장한 후,
    - OLAP 시스템이 웨어하우스에서 데이터를 분석한다.

- 예시(ex)
  - 신용카드 회사의 OLAP & OLTP 사용
      - OLTP : 신용카드 결제 시스템 : 실시간 결제 승인 및 잔액 업데이트 -> 실시간 처리에 집중
      - OLAP : 신용카드 사용 패턴 분석 : 지역별, 연령별 소비 트렌드 분석 -> 분석이나 인사이트에 집중

- 효율적인 데이터 분석을 위해 OLTP 와 OLAP 의 역할을 적절히 활용하는 것이 중요하다!

<hr>

## 데이터 웨어하우스 데이터 모델링 : 스타 스키마 vs 스노우플레이크 스키마
- 데이터 웨어하우스에서 데이터를 효과적으로 저장하고 분석하려면, **데이터 모델링(Data Modeling)** 이 필수적이다.
- 데이터 모델링이란, **데이터를 테이블로 구성하고, 서로 관계를 맺어(join) 효율적으로 관리하는 방식** 을 의미한다.

## 1. 데이터 모델(Data Model)
![Image](https://github.com/user-attachments/assets/c2f25ac4-d648-49c7-b40f-1bae9a7a281c)
- 데이터 웨어하우스에서 널리 사용되는 두 가지 주요 데이터 모델은 **스타 스키마(Star Schema)** 와 **스노우플레이크 스키마(Snowflake Schema)** 이다.
- 이 두 가지 모델은 **Kimball의 바텀업(Bottom-up) 데이터 웨어하우스 아키텍처** 에서 사용되며, 데이터를 **비정규화(Denormalization)** 하여 분석 성능을 높이는 방식이다.

## 2. 팩트 테이블(Fact Table) vs 차원 테이블(Dimension Table)

1) 팩트 테이블(Fact Table)
    - **측정값(Measure) 또는 지표(Metric)** 을 저장하는 테이블 이다.
    - **트랜잭션 데이터** 를 포함하며, **행(Row) 마다 특정 이벤트(ex.구매, 주문)** 을 나타낸다.
    - **외래키(Foreign Key)** 로 여러 **차원 테이블(Dimension Table) 과 연결** 된다.

- 팩트 테이블 예시(ex. Bravo 가구 회사의 매출 데이터)
![Image](https://github.com/user-attachments/assets/1342e532-6d25-41c2-8303-a0e24c1f82a0)
    - 팩트(Fact) 값이 포함되어 있다.(ex.판매량, 세금, 총 매출 등)
    - **외래 키(FK)** 를 사용하여 **차원 테이블(Dimension Table)과 연결** 된다.
    - 데이터 분석 시 **수학적 연산이 적용될 수 있는 값** 들이 포함된다.

2) 차원 테이블(Dimension Table)
    - **팩트 테이블을 설명하는 속성(Attribute)을 저장** 하는 테이블
    - 분석할 때 **필터링, 그룹핑, 세부 분석** 을 가능하게 한다.
    - 팩트 테이블과 **1:N 관계(One-to-Many RelationShip)** 을 가진다.

- 차원 테이블 예시(ex. 고객 정보)

  ![Image](https://github.com/user-attachments/assets/4bc86d74-723a-41db-89d5-baea240f96c9)
    
    - 팩트 테이블을 보완하여 **상세정보를 제공** 한다.
    - 분석을 위한 **필터(Filter) 및 그룹화(Grouping)** 가 가능하다.
    - **하나의 팩트 테이블이 여러 차원 테이블과 연걸** 될 수 있다.

## 3. 스타 스키마
- 하나의 **팩트 테이블** 을 중심으로 여러 개의 **차원 테이블**이 연결된 형태이다.
- 스키마 구조가 **별(star) 구조 모양** 을 이루므로, **스타 스키마** 라고 불린다.
- **조인이 적어 쿼리 속도가 빠르고 분석이 용이** 하다.

## 스타 스키마 예시(Star Schema)
![Image](https://github.com/user-attachments/assets/6f641dba-49c2-4238-828f-fcd111c1dae6)
- (팩트 테이블) : Sales_Order_Fact
  - 판매량, 세금, 총 매출과 같은 측정값을 포함한다.
- (차원 테이블) : Customer_Dim, Product_Dim, Date_Dim
  - 고객(Customer_Dim) : 고객의 이름, 이메일, 국가 등을 저장
  - 제품(Product_Dim : 제품명, 카테고리, 브랜드 등을 저장
  - 날짜(Time_Dim) : 연도, 월, 일 정보를 저장

- 스타 스키마의 장점(Pros)
    - 빠른 분석 속도(JOIN 이 적다.)
    - 단순한 구조로 이해하기 쉽다.
    - 비즈니스 분석가도 쉽게 사용할 수 있다.

- 스타 스키마의 단점(Cons)
    - 중복된 데이터가 존재할 가능성이 있다.(비정규화로 인해)
    - 데이터 저장 공간을 더 많이 사용할 수 있다.

## 4. 스노우플레이크 스키마(Snowflake Schema)
- 스타 스키마에서 **일부 차원 테이블이 정규화(Normalization)된 형태** 이다.
- 즉, 차원 테이블이 **더 작은 하위 테이블로 분할** 된 셈이다.
- 스키마 구조가 **눈꽃(Snowflake) 모양** 을 이루므로, **스노우플레이크 스키마** 라고 불린다. 

## 스노우플레이크 스키마 예시
![Image](https://github.com/user-attachments/assets/358b96b9-f847-4327-bb86-b679dcb02597)

- Customer 테이블에서 Country 테이블이 분리되어 있는 나온 형태이며, **데이터 모델이 눈송이 처럼 변한다.**
- Country 테이블은 Customer 이라는 **차원 테이블을 통해서만 팩트 테이블과 join 할 수 있다.**
   
- 스노우플레이크 스키마의 장점(Pros)
    - **데이터의 중복이 최소화** 된다.(**정규화** 된 데이터구조)
    - 데이터 **저장 공간 절약이 가능** 하다.
   
- 스노우플레이크 스키마의 단점(Cons)
    - **JOIN 연산이 많아 쿼리 성능이 저하될** 수 있다.
    - **구조가 복잡해 이해하기 어려울** 수 있다.


## 스타 스키마 VS 스노우플레이크 스키마 비교
![Image](https://github.com/user-attachments/assets/a3abbb77-b9b6-48d8-8588-ca189c9c3f25)


### 스타 스키마 : 쿼리 속도가 빠르고 분석이 용이하므로 BI 도구와 함께 사용하기 좋다.
### 스노우 플레이크 스키마 : 저장 공간을 절약할 수 있지만, JOIN 연산이 많아 성능이 저하될 수 있다.

<hr>

## 

# 데이터 웨어하우스 개념 

## 데이터 웨어하우스 라이프사이클
- 데이터 웨어하우스 프로젝트는 3가지 주요 단계로 구성된다.
  1) 계획 단계(Planning) : 요구사항 수집 및 데이터 모델링을 통해 데이터 웨어하우스의 구조를 정의한다.

     1-1) 요구사항 수집
      - data analyst : 비즈니스와 협업해 의사결정을 지원한다.
      - data scientist : 머신러닝 모델로 프로세스를 자동화하고 효율을 개선한다.

     1-2) 데이터 모델링
      - data engineer : 데이터 파이프라인을 설계한다.
      - database admin : 트랜잭션 데이터베이스를 관리한다.
      - data analyst & data scientist : 데이터 모델이 비즈니스 목표에 부합하는지 확인한다.
     
  3) 구현 단계(Implementation) : ETL(Extract, Transform, Load) 프로세스 설계 및 BI(Business Intelligence) 애플리케이션 개발을 한다.

     2-1) ETL 설계 및 개발
       - data engineer : 데이터 파이프라인을 구축한다.
       - database admin : 데이터 소스에서의 데이터 추출을 지원한다.

     2-2) BI 애플리케이션 개발
       - data analyst & data scientist : BI 도구 설정에 자문을 제공한다.
    
  5) 지원 및 유지보수 단계(Support & Maintenance) : 데이터 웨어하우스 업데이트, 테스트 및 배포를 진행한다.

     3-1) 유지보수
       - data engineer : 유지보수 및 업데이트를 실행한다.

     3-2) 테스트 및 배포
       - data analyst & data scientist : 시스템이 요구사항을 충족하는지 테스트한다.
       - data engineer : 시스템을 배포하고 조직에서 사용가능하게 한다.

  -> 주요 변경사항이 생기면 다시 계획단계(Planning)로 돌아간다.


## 각 단계별 주요 역할
1) 데이터 분석가 & 데이터 사이언티스트
  - 비즈니스 요구사항을 수집하고 BI 도구 설정을 지원한다.
2) 데이터 엔지니어 & 데이터베이스 관리자(admin)
  - 데이터 파이프라인을 구축하고, 원천 시스템에서 데이터 추출을 담당한다.

<hr>

## 데이터 웨어하우스 vs 데이터 레이크 vs 데이터 마트 

1) 데이터 베이스(Database)
     - 테이블(행과 열) 형태로 정보를 저장하는 구조화된 시스템이다.
     - 조직 내 트랜잭션 데이터를 저장하는 용도로 사용한다.
     - (ex) 고객 구매 정보를 저장한다.
     - 한계 : 대규모 분석 쿼리 수행 시 속도가 느려지고, 트랜잭션 처리 성능에 영향을 줄 수 있다.

2) 데이터 웨어하우스(Data Warehouse)
     - 조직의 **여러부서** 에서 **데이터를 통합** 하여 중앙 집중식 분석이 가능하도록 구축된 저장소이다.
     - **다양한 데이터 소스** (여러 데이터베이스, 로그 파일 등)에서 데이터를 수집한다.
     - ETL(Extract, Transform, Load) 프로세스를 통해 데이터를 구조화된 테이블 형태로 저장한다.
     - **100GB 이상으로 대규모 데이터 저장** 이 가능하다.
     - **구조 변경이 어렵고** , **upstream 및 downstream effect** 가 크다.
       (Upstream effects are those that occur before a product or service is used,
       while downstream effects are those that occur after a product or service is used.)

3) 데이터 마트(Data Mart)
     - 특정부서(ex.재무팀, 마케팅팀)에서 사용할 데이터만 저장하는 관계형 데이터베이스
     - 데이터 웨어하우스처럼 **구조화된 데이터를 저장** 하지만, **한 부서의 데이터만 포함** 한다.
     - 입력 데이터 소스가 적다.(주로 데이터 웨어하우스의 일부 데이터를 활용한다.)
     - 크기는 일반적으로 100GB 이하로, 데이터웨어하우스보다 작다.

4) 데이터 레이크(Data Lake)
     - 데이터 웨어하우스처럼 조직 전체 데이터를 저장하지만, **비정형 데이터(영상, 오디오, 이미지 등)도 저장** 할 수 있다.
     - 여러 부서의 데이터를 저장하며, **다양한 데이터 소스를 수용** 한다.
     - **데이터의 구조를 사전에 정의할 필요 없이** **유연하게 저장** 이 가능하다.
     - **데이터 활용 목적이 명확하지 않은 경우** 에도, 미래 분석을 위해 **데이터 보관이 가능** 하다.
     - **데이터 웨어하우스보다 유연한 구조를 가지며, 변경이 용이하다.**
  
   ![Image](https://github.com/user-attachments/assets/845b7168-0f87-4f60-9003-3bc328daa71d)

<hr>

## 데이터 웨어하우스 아키텍처와 4가지 레이어 
- 데이터 웨어하우스(Data Warehouse)는 **비즈니스 의사결정을 지원하기 위해 데이터를 **수집,저장,분석** 하는 시스템이다.
- 일반적으로 데이터웨어하우스는 **4가지 주요 레이어** 로 구성된다.

## 1. 데이터 소스 레이어(Data Source Layer)
- 데이터 웨어하우스의 첫 번째 단계로, **다양한 데이터 소스에서 데이터를 가져오는 역할** 을 한다.
- 주요 데이터 소스
    - 트랜잭션 데이터베이스 : 기업의 운영 시스템(ex.ERP, CRM, POS 시스템 등)
    - 파일 데이터 : CSV, JSON, XML 등
    - 기타 데이터 : 로그 데이터, 센서 데이터 등 구조적/비구조적 데이터

## 2. 데이터 스테이징 레이어(Data Staging Layer)
- **데이터를 변환하고 정제** 하는 단계로, ETL(Extract,Transform,Load) 프로세스를 포함한다.
    - ETL 프로세스
        1. Extract(추출) : 원본 데이터 소스에서 데이터를 가져온다.
        2. Transform(변환) : 데이터 정제, 비즈니스 규칙 적용, 포맷 변환 등을 수행한다.
        3. Load(적재) : 변환된 데이터를 데이터 웨어하우스에 저장한다.
     
- 스테이징 레이어에서는 데이터를 **임시 테이블(Stageing Table)** 에 저장하여 다음 단계에서 사용할 수 있도록 준비한다.

## 3. 데이터 저장 레이어(Data Storage Layer)
- **데이터를 장기적으로 저장** 하는 공간으로, 데이터 웨어하우스와 데이터 마트(Data Mart)로 구성된다.
    - 데이터 저장 방식
        - **데이터 웨어하우스 -> 데이터 마트** : 데이터가 먼저 웨어하우스에 저장된 후 특정 목적에 맞게 데이터 마트로 이동한다.
        - **데이터 마트 -> 데이터 웨어하우스** : 데이터 마트에서 특정 데이터를 먼저 저장하고 이후 웨어하우스로 통합된다.
    - * 데이터 마트(Data Mart)란?
          - 특정 부서나 목적(ex.마케팅, 인사, 영업)에 맞춰 세분화된 데이터 저장소
          - 성능 최적화 및 빠른 조회를 위해 활용된다.

## 4. 데이터 프레젠테이션 레이어(Data Presentation Layer)
- **사용자가 데이터를 조회하고 분석** 하는 단계로, 비즈니스 인텔리전스(BI)도구를 활용해 데이터를 시각화하고 인사이트를 도출할 수 있다.
    - 데이터 분석 도구
        - BI 툴 : PowerBI, Tableau, Looker 등
        - 데이터 마이닝 도구 : 머신러닝 기반 분석 활용
        - SQL 쿼리 : 직접 데이터 조회 및 분석

- 사용자는 대시보드, 그래프, 차트 등을 통해 데이터를 쉽게 이해하고, 의사결정에 활용할 수 있다.

<hr>

## 데이터 웨어하우스 프레젠테이션 레이어와 주요 도구 정리
- 데이터 웨어하우스의 **프레젠테이션 레이어(Presentation Layer)** 는 사용자가 데이터를 조회하고 분석하는 최종 단계이다. 이 단계에서는 다양한 도구를 활용하여 데이터를 시각화하고 인사이트를 도출할 수 있다. 프레젠테이션 레이어에서 사용되는 도구들은 크게 **3가지 그룹** 으로 나뉜다.

1. 자동화된 보고 및 대시보드 도구 : Tableau, Power BI 등을 사용해 시각적으로 데이터를 분석한다.
2. BI/데이터 분석 도구 : RapidMiner, KNIME 등을 활용해 패턴을 발견하고 인사이트를 도출한다.
3. SQL을 활용한 직접 쿼리 도구 : SQL, Python, R을 사용하여 맞춤형 데이터 분석을 수행한다.

## 1. 자동화된 보고 및 대시보드 도구(Automated Reporting & Dashboarding)
- 역할
    - 데이터를 자동으로 수집하여 보고서(Reports) 및 대시보드(Dashboard)를 생성한다.
    - 기업 내 데이터 통합을 통해 빠르고 정확한 의사결정을 지원한다.
 
- 주요 특징
    - 데이터를 한 곳에서 관리하여 **분석가** 들이 효율적으로 정보에 접근이 가능하다.
    - 보고서 자동화 기능을 통해 시간 절약 및 실시간 정보 제공이 가능하다.
    - 주 사용자는 **분석가, 일반 사용자들** 이다.

- 대표적인 도구

    ![Image](https://github.com/user-attachments/assets/7e3b9b3c-7753-424f-849b-7008694bcf30)
    - Tableau : 대시보드 시각화 및 분석
    - Power BI : Microsoft의 BI 솔루션
    - Google Looke : 클라우드 기반 데이터 시각화 도구
    - SAP BW : 대기업에서 많이 사용하는 데이터 웨어하우스 솔루션
 
- 활용 예시(ex)
    - 기업의 **매출 보고서** 를 자동으로 생성하여 실시간으로 확인 가능하다.
    - 마케팅팀이 특정 캠페인의 성과를 분석하고  **대시보드에서 시각적으로  확인** 한다.
 
## 2. BI 및 데이터 분석 도구(BI/Data Analytics) 
- 역할
    - **데이터 탐색 및 패턴 발견** 을 통해 기업의 전략 수립을 지원한다.
    - 데이터에서 인사이트를 도출하여 **비즈니스 의사결정에 도움** 을 준다.

- 주요 특징
    - **데이터 마이닝(Data Mining)** 기능을 제공하여 **트렌드 및 패턴 분석** 이 가능하다.
    - GUI 기반의 드래그 앤 드롭(Drag & Drop) 인터페이스 제공 (코딩 없이 분석 가능)
    - 필요 시 Python, R 등의 코드 기반 분석 기능도 제공한다.
    - 주 사용자는 **분석가, 데이터 사이언시트스** 이다.

- 대표적인 도구
  
    ![Image](https://github.com/user-attachments/assets/1d60bdb8-c55d-495a-8e51-a402c331f089)
    - Oracle Data Mining : 오라클 데이터베이스와 연동하여 데이터 분석을 한다.
    - RapidMiner : 머신러닝 및 데이터 마이닝을 지원한다.
    - Alteryx : 데이터 준비 및 분석 자동화한다.
    - KNIME : 오픈소스 데이터 분석 및 머신러닝 도구이다.

- 활용 예시(ex)
    - **매출 데이터에서 특정 지역의 매출 감소 원인을 분석** 한다.
    - **고객 구매 패턴을 분석하여 맞춤형 마케팅 전략 수립** 을 한다.

## 3. SQL을 활용한 직접 쿼리 도구(Direct Queries)
- 역할
    - 사용자가 **SQL을 직접 작성** 하여 데이터 웨어하우스에서 데이터를 추출한다.
    - **맞춤형 분석을 수행** 하고 **필요한 데이터만 필터링** 이 가능하다.

- 주요 특징
    - **기술적 역량이 있는 사용자(데이터 엔지니어, 데이터 사이언티스트)** 가 주로 사용한다.
    - 보다 정밀한 데이터 분석 및 조작이 가능하다.
    - Python, R 과 같은 프로그래밍 언어와 결합하여 **고급 분석 및 머신러닝 적용이 가능** 하다.
    - 주 사용자는 **분석가, 데이터 사이언티스트, 데이터 엔지니어** 이다.

- 대표적인 도구

    ![Image](https://github.com/user-attachments/assets/9a1b2753-482a-4e26-a1be-e618deb64fea)   
    - SQL Server Management Studio(SSMS) : Microsoft SQL Server 관리 도구
    - Azure Data Studio : 클라우드 환경에서 SQL 분석 지원하는 도구
    - Python & R : 데이터 분석 및 머신러닝을 위한 프로그래밍 언어

- 활용 예시(ex)
    - **특정 고객군의 구매 데이터를 SQL로 직접 추출하여 머신러닝 모델을 생성** 한다.
    - **R을 사용하여 판매 데이터의 이상치(Outlier)** 를 감지 및 분석한다.

=> 프레젠테이션 레이어는 **데이터 웨어하우스의 최종 사용자 인터페이스** 로, 비즈니스 의사결정에 핵심적인 역할을 한다.

<hr>

## 데이터 웨어하우스 아키텍처 
- 데이터 웨어하우스(Data Warehouse,DW)는 데이터를 수집, 저장, 분석하는 시스템이며, 이를 구축하는 방식에는 **Inmon(탑다운, Top-down)과 Kimball(바텀업,Bottom-up)** 두 가지 대표적인 아키텍처가 있다.

## 1. Inmon 의 Top-down 방식
- 개념
    - Bill Inmon이 제안한 데이터 웨어하우스 설계 방식이다.
    - 데이터를 **중앙 집중형 웨어하우스에서 먼저 정규화(Normalization)하여 저장한 후** , **부서별 데이터 마트(Data Mart)로 전달** 한다.
![Image](https://github.com/user-attachments/assets/a453ecf4-47ee-4f81-88b3-a78dee4b68c4)

- 특징
    - 모든 데이터의 표준화가 필요
        - 데이터를 웨어하우스로 이동하기 전에 **데이터 정의, 명명 규칙, 정합성 기준** 등을 조직 전체가 합의해야 한다.
    - 정규화된 데이터 저장 구조
        - **데이터 정규화(Normalization)** 을 통해 데이터 중복을 최소화하고 데이터 품질을 향상시킨다.
    - 데이터 마트는 웨어하우스에서 파생
        - 데이터는 **먼저 웨어하우스에 저장** 되고, 이후 부서별 **데이터 마트(Data Mart)로 이동** 한다.

- 장점(Pros)
    1. **데이터의 일관성과 신뢰성을 보장** 한다.
        - 모든 데이터를 표준화하여 **기업 내 단일 진실(Single Source of Truth, SSOT)** 을 유지한다.
    2. **데이터 중복을 최소화** 한다.
        - **정규화된 데이터로 저장** 되어 **불필요한 데이터 중복이 줄어든다.**
    3. **데이터 마트 확장이 용이** 하다.
        - **표준화된 데이터를 기반** 으로 **데이터 마트를 손쉽게 추가** 할 수 있다.

- 단점(Cons)
    1. **데이터 조회 속도가 느릴 수 있다.**
        - **정규화로 인해 많은 JOIN 연산이 필요** 하여 보고서 생성 시 **성능 저하가 발생할 수 있다.** 
    2. **초기 구축 비용이 높다.**
        - **전체 데이터를 표준화**해야 하므로 **설계 및 정합성 확보에 많은 시간과 비용** 이 소요된다. 

## 2. Kimball 의 Bottom-up 방식
- 개념
    - Ralph Kimball이 제안한 방식으로, **데이터를 먼저 비정규화(Denormalization)** 한 후, **데이터 마트를 구축하여 빠르게 보고서 및 분석이 가능** 하게 한다.
    - **스타 스키마(Star Schema)** 를 사용하여 **데이터 쿼리 속도를 최적화** 한다.
![Image](https://github.com/user-attachments/assets/bb158604-ee26-4e17-b0a7-c7a320f0f0c8)

- 특징
    - 빠른 데이터 분석 가능
        - 데이터를 부서별로 정리하여 **각 부서의 데이터 마트(Data Mart)를 먼저 구축** 한 후, **웨어하우스로 통합** 한다.
    - 데이터 구조를 단순화하여 쿼리 실행 속도를 빠르게 함
        - 데이터 구조를 단순화하여 **쿼리 실행 속도를 빠르게 한다.**
    - 부서 단위 확장 가능
        - 한 부서의 데이터 마트를 구축한 후, **다른 부서로 확장하는 방식** 이다.

- 장점(Pros)
    1. **빠른 구축이 가능** 하다.
        - **부서별 데이터 마트를 먼저 구축하고 확장하는 방식** 이므로 **초기 구축 비용이 적고, 빠르게 적용이 가능** 하다.
    2. **쿼리 속도를 향상** 시킬 수 있다.
        - **비정규화된 데이터 구조 덕분** 에 **JOIN 연산이 적고** **보고서 생성속도가 빠르다.**
    3. **유연한 확장성** 을 갖춘다.
        - **필요에 따라 부서별로 데이터 마트를 추가** 할 수 있다.
        
- 단점(Cons)
    1. **ETL 프로세스 시간을 증가** 시키고 **데이터 중복 발생** 이 나타날 수 있다.
        - **비정규화된 데이터 모델** 이므로 **ETL 프로세스 시간을 늘어날** 수 있고, **여러 데이터 마트에서 중복된 데이터가 발생할 위험이 있다.** 
    2. **데이터 정합성 문제** 가 나타날 수 있다.
        - 동일한 데이터(중복 데이터)가 여러 데이터 마트에서 다르게 계산될 가능성이 있어 **기업의 단일 진실(SSOT)를 유지하기 어렵다.**
        - (ex) 동일한 이름을 가진 'revenu'라는 필드가 두 개의 데이터마트에 있고, 한 데이터 마트에서는 상품비용으로 계산되는데, 다른 데이터마트에서는 그러지 않는 경우
    3. **장기적인 관리 비용이 증가** 할 수 있다.
        - **새로운 부서를 추가할 때마다 추가적인 개발과 데이터 통합 작업이 필요** 하다.

## 데이터 웨어하우스 아키텍처는 기업의 목표와 데이터 활용 방식에 따라 적절한 모델을 선택하는 것이 중요하다.
![Image](https://github.com/user-attachments/assets/086f6ddb-169e-44ef-801a-3cc1a4a1e5eb)
- **기업이 장기적인 데이터 품질과 일관성을 중요하게 여긴다면, Inmon(Top-Down) 방식이 적합**하다.
- **빠른 데이터 분석과 유연한 확장이 필요하다면, Kimball(Bottom-Up) 방식이 적합**하다.

<hr>




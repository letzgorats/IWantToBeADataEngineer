## ğŸ Pythonìœ¼ë¡œ ì‹œì‘í•˜ëŠ” API ì…ë¬¸ â€“ requests ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì²« API ìš”ì²­í•˜ê¸°
APIëŠ” í˜„ëŒ€ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” í•µì‹¬ ë„êµ¬ì…ë‹ˆë‹¤. 
ì´ë²ˆ ê¸€ì—ì„œëŠ” Python requests íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•´ ì›¹ APIì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê¸°ì´ˆë¶€í„°, URL êµ¬ì¡°Â·HTTP ë©”ì„œë“œÂ·í—¤ë”ì™€ ìƒíƒœ ì½”ë“œê¹Œì§€ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.

### 1. APIë€ ë¬´ì—‡ì¸ê°€?
`API(Application Programming Interface)`ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œ ê°„ì˜ ì†Œí†µ ê·œì¹™ê³¼ ê¸°ëŠ¥ì„ ì •ì˜í•œ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤.
ìš°ë¦¬ê°€ ì´ë©”ì¼ ì•±ì—ì„œ "ì „ì†¡" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´, ì‚¬ì‹¤ì€ ì•±ì´ ë©”ì¼ ì„œë²„ì˜ APIë¥¼ í˜¸ì¶œí•´ ì´ë©”ì¼ ë°œì†¡ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ì£ .

- UI: ì‚¬ìš©ìê°€ ì§ì ‘ ë³´ëŠ” í™”ë©´ (ì˜ˆ: ì´ë©”ì¼ ì•± ì¸í„°í˜ì´ìŠ¤)
- API: í”„ë¡œê·¸ë¨ë¼ë¦¬ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” í†µë¡œ (ì˜ˆ: ì´ë©”ì¼ ì „ì†¡ ëª…ë ¹)

### 2. Web API ì˜ ê°œë…
Web APIëŠ” ì¸í„°ë„·ì„ í†µí•´ HTTP í”„ë¡œí† ì½œë¡œ í†µì‹ í•˜ëŠ” API ì…ë‹ˆë‹¤.
- `í´ë¼ì´ì–¸íŠ¸(Client)` : ìš”ì²­ì„ ë³´ë‚´ëŠ” ìª½(ë¸Œë¼ìš°ì €, ì•±, Python ìŠ¤í¬ë¦½íŠ¸)
- `ì„œë²„(Server)` : ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ” ìª½

### 3. Web APIì˜ ëŒ€í‘œ ìœ í˜•

| ìœ í˜•          | íŠ¹ì§•                                 | í™œìš© ì˜ˆì‹œ                   |
| ----------- | ---------------------------------- | ----------------------- |
| **SOAP**    | XML ê¸°ë°˜, ì—„ê²©í•œ ê·œê²©, ê¸°ì—…ìš© ëŒ€ê·œëª¨ ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©   | ê¸ˆìœµÂ·ì •ë¶€ ì‹œìŠ¤í…œ               |
| **REST**    | URLÂ·HTTP ë©”ì„œë“œ ê¸°ë°˜, ë‹¨ìˆœí•˜ê³  í™•ì¥ì„± ë†’ìŒ       | ëŒ€ë¶€ë¶„ì˜ ì›¹ ì„œë¹„ìŠ¤ API          |
| **GraphQL** | í´ë¼ì´ì–¸íŠ¸ê°€ ì›í•˜ëŠ” ë°ì´í„°ë§Œ ìš”ì²­ ê°€ëŠ¥, ë„¤íŠ¸ì›Œí¬ íš¨ìœ¨ì„± ë†’ìŒ | GitHub API, Shopify API |

> ì´ë²ˆ ê¸€ì—ì„œëŠ” **REST API** ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë‹¤ë£¹ë‹ˆë‹¤.

### 4. Pythonì—ì„œ API ìš”ì²­í•˜ê¸° â€“ urllib vs requests

#### ğŸ“Œ urllib
Python ê¸°ë³¸ ë‚´ì¥ ëª¨ë“ˆì´ì§€ë§Œ, ì‘ë‹µ ì½ê¸°Â·ë””ì½”ë”© ë“± ì ˆì°¨ê°€ ë‹¤ì†Œ ë³µì¡í•©ë‹ˆë‹¤.
```python
from urllib.request import urlopen

response = urlopen("https://api.example.com/albums")
data = response.read().decode("utf-8")
print(data)
```

#### ğŸ“Œ requests
ë” ê°„ê²°í•˜ê³  ì§ê´€ì ì´ë©°, ë§ì€ ê¸°ëŠ¥ì´ ê¸°ë³¸ ì œê³µë©ë‹ˆë‹¤.
```python
import requests

response = requests.get("https://api.example.com/albums")
print(response.text)
```

### 5.  URL êµ¬ì¡°ì™€ Query Parameter
URLì€ APIì—ì„œ **ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜** ì™€ **ì¶”ê°€ ì˜µì…˜** ì„ ì§€ì •í•˜ëŠ” ì£¼ì†Œì…ë‹ˆë‹¤.

#### URL 5ëŒ€ êµ¬ì„±ìš”ì†Œ
1. `Protocol` : `http/https`
2. `Domain` : `api.example.com`
3. `Port` : `:80`,`:443`,(ìƒëµ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©)
4. `Path` : `/albums`
5. `Query String` : `?artist=Queen&year=1980`

#### requests ë¡œ Query Parameter ì¶”ê°€
```python
params = {"artist": "Queen", "year": 1980}
response = requests.get("https://api.example.com/albums", params=params)
```

### 6. ì£¼ìš” HTTP ë©”ì„œë“œ(Verbs)

<img width="1108" height="274" alt="image" src="https://github.com/user-attachments/assets/52a3b391-8643-46c1-8ea8-a7a4a76ee33b" />

| ë©”ì„œë“œ    | ì„¤ëª…        | ì˜ˆì‹œ ìƒí™©      |
| ------ | --------- | ---------- |
| GET    | ë¦¬ì†ŒìŠ¤ ì¡°íšŒ    | ì•¨ë²” ëª©ë¡ ê°€ì ¸ì˜¤ê¸° |
| POST   | ë¦¬ì†ŒìŠ¤ ìƒì„±    | ìƒˆ ì•¨ë²” ì¶”ê°€    |
| PUT    | ë¦¬ì†ŒìŠ¤ ì „ì²´ ìˆ˜ì • | ì•¨ë²” ì •ë³´ ë³€ê²½   |
| DELETE | ë¦¬ì†ŒìŠ¤ ì‚­ì œ    | ì•¨ë²” ì œê±°      |

```python
# POST ì˜ˆì‹œ
data = {"title": "New Album", "artist": "Queen"}
requests.post("https://api.example.com/albums", data=data)

```

### 7. Request message VS Response message

#### 1) start line
<img width="1013" height="400" alt="image" src="https://github.com/user-attachments/assets/7410d2c0-27b6-4766-929a-e6f83198a462" />

> `í´ë¼ì´ì–¸íŠ¸-ì„œë²„` ì˜ `ìš”ì²­-ì‘ë‹µ` ë©”ì‹œì§€ êµ¬ì¡°ê°€ ë§¤ìš° ìœ ì‚¬í•˜ë©° ë‘˜ ë‹¤ ì„¸ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ ì¤‘ ì²« ë¶€ë¶„ì´ `start-line` ì…ë‹ˆë‹¤.

> ìš”ì²­ë©”ì‹œì§€ì˜ ìš”ì²­ë¼ì¸ì—ëŠ” `GET`,`POST` ì™€ ê°™ì€ ìš”ì²­ ìœ í˜•ê³¼ ë©”ì‹œì§€ê°€ ì „ë‹¬ë˜ì–´ì•¼ í•˜ëŠ” ê²½ë¡œê°€ í¬í•¨ë©ë‹ˆë‹¤.

> ì‘ë‹µë©”ì‹œì§€ì˜ ì‹œì‘ë¼ì¸ì€ `ìƒíƒœì¤„`ì´ë¼ê³ ë„ í•©ë‹ˆë‹¤. 3ìë¦¬ ìˆ«ì ìƒíƒœ ì½”ë“œì™€ ìƒíƒœ ë©”ì‹œì§€ê°€ í¬í•¨ë˜ì–´ ìˆì£ .

##### ğŸ“Œ Status Code ì£¼ìš” ì˜ˆì‹œ

<img width="1030" height="301" alt="image" src="https://github.com/user-attachments/assets/eea7d993-3b39-4ba1-ab6a-088cabac8c62" />

> `400`ë²ˆëŒ€ëŠ” í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜/ `500`ë²ˆëŒ€ëŠ” ì„œë²„ ì˜¤ë¥˜

| ì½”ë“œ  | ì˜ë¯¸                            |
| --- | ----------------------------- |
| 200 | OK â€“ ìš”ì²­ ì„±ê³µ                    |
| 404 | Not Found â€“ ë¦¬ì†ŒìŠ¤ ì—†ìŒ            |
| 500 | Internal Server Error â€“ ì„œë²„ ì˜¤ë¥˜ |

```python
response = requests.get("https://api.example.com/albums")
print(response.status_code)    # 200 ì´ë¼ë©´,

response.status_code == 200    # True
```
> `response.status_code` ë¥¼ í†µí•´ ì‘ë‹µ ìƒíƒœì½”ë“œê°’ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

##### ğŸ“Œ Status Code with requests
```python
import requests

print(requests.codes.ok)         # 200
print(requests.codes.not_found)  # 404

# ìƒíƒœ ì½”ë“œ ë¹„êµ ì˜ˆì‹œ
response = requests.get("https://api.github.com/404")
print(response.status_code == requests.codes.not_found)  # True
```
> `response.status_code` ë¥¼ í†µí•´ ì‘ë‹µ ìƒíƒœì½”ë“œê°’ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

> `requests` ëª¨ë“ˆ ì•ˆì—ëŠ” `codes` ë¼ëŠ” ê°ì²´ê°€ ìˆìŠµë‹ˆë‹¤.
> `requests.codes`ì‰¬ìš´ ì¡°íšŒ ê°ì²´ê°€ ë‚´ì¥ë˜ì–´ ìˆì–´ì„œ, ìƒíƒœ ì½”ë“œì˜ ëª¨ë“  ìˆ«ìë¥¼ ì•”ê¸°í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.

> `requests.codes.___`ë¥¼ í†µí•´ ì½”ë“œ ìƒìˆ˜ê°€ ë§¤í•‘ë˜ê¸° ë•Œë¬¸ì— ì‘ë‹µ ìƒíƒœ ì½”ë“œì™€ ë¹„êµì‹œ ìœ ìš©í•©ë‹ˆë‹¤. 

#### 2) headers
<img width="1024" height="412" alt="image" src="https://github.com/user-attachments/assets/2e3572ac-effc-4747-a8c8-61ee9bf319a5" />

> ê° í—¤ë”ì—ëŠ” `ì „ì†¡`ë˜ê±°ë‚˜ `ìˆ˜ì‹ ë˜ëŠ” ë©”ì‹œì§€` ë˜ëŠ” `ë°ì´í„°ë¥¼ ì„¤ëª…í•˜ëŠ” ì •ë³´`ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì „ì†¡í•˜ëŠ” ì½˜í…ì¸ ì˜ ìœ í˜•ì´ë‚˜, ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ìˆ˜ì •ëœ ë‚ ì§œ ë“±ì…ë‹ˆë‹¤.

> ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•˜ì§€ ì•ŠëŠ” í‚¤ë¡œ ì‹œì‘í•˜ê³ , ê·¸ ë’¤ì— ì½œë¡ ê³¼ í•´ë‹¹ í—¤ë”ì˜ ê°’ì´ ì˜µë‹ˆë‹¤.(`key-value`)

> íš¨ê³¼ì ìœ¼ë¡œ í†µì‹ í•˜ê¸° ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ëŠ” ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í—¤ë”ì—ì„œëŠ” ì •ë³´ë¥¼ êµí™˜í•˜ëŠ” ë° ì‚¬ìš©í•  ì–¸ì–´ì— ëŒ€í•´ í•©ì˜í•©ë‹ˆë‹¤. ì´ê²ƒì„ 'ì½˜í…ì¸  í˜‘ìƒ' ì´ë¼ê³  í•©ë‹ˆë‹¤.
> ì˜ˆë¥¼ ë“¤ì–´, `í´ë¼ì´ì–¸íŠ¸`ëŠ” `accept` í—¤ë”ë¥¼ ì „ì†¡í•˜ì—¬ ì„œë²„ì— JSON í˜•ì‹ì˜ ì‘ë‹µì„ ìˆ˜ë½í•  ìˆ˜ ìˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.
> `ì„œë²„`ê°€ ì‘ë‹µí•  ë•ŒëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ í˜•ì‹ì„ ì•Œë¦¬ê¸° ìœ„í•´ `content-type` í—¤ë”ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

##### ğŸ“Œ Adding the accept header will tell the API we want to receive a JSON formatted response!

<img width="982" height="532" alt="image" src="https://github.com/user-attachments/assets/6046c197-883d-4b40-ba0b-ef098053c980" />


##### ğŸ“Œ Headers í™œìš©
íŒŒì´ì¬ requests íŒ¨í‚¤ì§€ë¥¼ í™œìš©í•˜ë©´ í—¤ë”ë¥¼ ì¶”ê°€í•˜ê³  ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `requests.get()` ì´ë‚˜ `requests.post()` ë“± ë‚´ë¶€ì— `headers` ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ **ì›í•˜ëŠ” ë§Œí¼ì˜ í—¤ë”ë¥¼ ìš”ì²­ì— ì¶”ê°€**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python

headers = {"Accept": "application/json"}
response = requests.get("https://api.example.com/albums", headers=headers)

# ëŒ€ì†Œë¬¸ì êµ¬ë¶„ì—†ëŠ” í‚¤(content-type)ë¥¼ í™œìš©í•´ ì‘ë‹µê°ì²´ ê¸°ì¤€ì—ì„œëŠ” content type ì´ë¯€ë¡œ headersì˜ content-type ë½‘ëŠ” 2ê°€ì§€ ë°©ë²•
print(response.headers["Content-Type"])    # 'application/json'
print(response.headers.get("content-Type")    # 'application/json'
```

### 8. ì‹¤ë¬´ íŒ

- Postmanì´ë‚˜ cURLë¡œ ë¨¼ì € API ì‘ë‹µì„ í™•ì¸í•˜ê³  Python ì½”ë“œë¡œ ì˜®ê¸°ë©´ ë””ë²„ê¹…ì´ ì‰¬ì›Œì§‘ë‹ˆë‹¤.
- API í˜¸ì¶œ ì‹œ ì¸ì¦ í† í°ì´ í•„ìš”í•œ ê²½ìš° headersì— "Authorization": "Bearer <token>"ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
- REST API ë¬¸ì„œë¥¼ ì½ì„ ë•ŒëŠ” `ìš”ì²­ URL`, `ë©”ì„œë“œ`, `íŒŒë¼ë¯¸í„°`, `ì‘ë‹µ ì˜ˆì‹œ` 4ê°€ì§€ë¥¼ ê¼­ ì²´í¬í•˜ì„¸ìš”.

### ë§ˆë¬´ë¦¬
ì´ë²ˆ ê¸€ì—ì„œëŠ” APIì˜ ê¸°ë³¸ ê°œë…ë¶€í„° Python `requests` ë¡œ `GET`, `POST` ìš”ì²­ì„ ë³´ë‚´ê³ , URL êµ¬ì„±-HTTP ë©”ì„œë“œ, í—¤ë” ìƒíƒœ ì½”ë“œê¹Œì§€ ì‚´í´ë´¤ìŠµë‹ˆë‹¤.
ë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” ì¸ì¦ì´ í•„ìš”í•œ API ì™€ JSON ë°ì´í„° ì²˜ë¦¬ë¥¼ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.

<hr>

## ğŸ” Python API í™œìš© ì‹¬í™” â€“ ì¸ì¦, JSON, ì—ëŸ¬ ì²˜ë¦¬ê¹Œì§€ ì™„ë²½ ê°€ì´ë“œ
1ê³¼ì—ì„œ ìš°ë¦¬ëŠ” requests ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ API ìš”ì²­ì˜ ê¸°ë³¸ê¸°ë¥¼ ë‹¤ì¡ŒìŠµë‹ˆë‹¤. 
ì´ë²ˆ ê¸€ì—ì„œëŠ” í•œ ê±¸ìŒ ë” ë‚˜ì•„ê°€ **ì¸ì¦(Authentication)** ì„ í†µí•œ ë³´ì•ˆ ê°•í™”, **êµ¬ì¡°í™” ë°ì´í„°(JSON)** ì²˜ë¦¬, ê·¸ë¦¬ê³  **ì—ëŸ¬ ëŒ€ì‘(Error Handling)** ë°©ë²•ê¹Œì§€ ë‹¤ë¤„ë´…ë‹ˆë‹¤.
ì‹¤ë¬´ì—ì„œ APIë¥¼ ì•ˆì •ì ì´ê³  ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ê¼­ ì•Œì•„ì•¼ í•  í•µì‹¬ ê¸°ìˆ ë“¤ì„ ì˜ˆì œì™€ í•¨ê»˜ ìµí˜€ë´…ì‹œë‹¤.

### 1. API ì¸ì¦(Authentication)

#### 1) ì™œ í•„ìš”í•œê°€?
- API ì—ëŠ” ë¯¼ê°í•œ ë°ì´í„°ê°€ í¬í•¨ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì„œë²„ëŠ” ì‚¬ìš©ìì˜ ì‹ ì›ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.
- ì¸ì¦ì´ ì—†ìœ¼ë©´ ë³´í†µ 401 Unauthorized ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

#### 2) ì£¼ìš” ì¸ì¦ ë°©ì‹
   
| ë°©ì‹                  | íŠ¹ì§•                             | ë³´ì•ˆ ìˆ˜ì¤€ |
| ------------------- | ------------------------------ | ----- |
| **Basic Auth**      | username\:passwordë¥¼ Base64 ì¸ì½”ë”© | ë‚®ìŒ    |
| **API Key / Token** | URL íŒŒë¼ë¯¸í„°ë‚˜ í—¤ë”ì— í‚¤ ì „ë‹¬             | ì¤‘ê°„    |
| **JWT**             | ë§Œë£Œ ì‹œê°„Â·ì¶”ê°€ ì •ë³´ í¬í•¨, í† í° ê¸°ë°˜          | ë†’ìŒ    |
| **OAuth 2.0**       | ê¶Œí•œ ìœ„ì„, ì„¸ë°€í•œ ì ‘ê·¼ ì œì–´               | ë§¤ìš° ë†’ìŒ |

##### ğŸ“Œ Rank the API authentication methods from most secure (top) to least secure (bottom) by dragging them to the right position.

<img width="721" height="314" alt="image" src="https://github.com/user-attachments/assets/4a01ec89-cbd6-4a77-b584-b76ec76013c3" />

#### 3) requests ì—ì„œ êµ¬í˜„ ì˜ˆì‹œ

#### ğŸ“Œ Basic Authentication with requests & API key authentication with requests

```python
# Basic Auth
requests.get(url, auth=('user', 'pass'))

# API Key - í—¤ë” ë°©ì‹
headers = {'Authorization': 'Bearer YOUR_API_KEY'}
requests.get(url, headers=headers)

# API Key - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ë°©ì‹
params = {'access_token': 'YOUR_API_KEY'}
requests.get(url, params=params)
```

##### âœ… 1. Basic Authentication with requests - `auth`

```python
# Create the authentication tuple with the correct values for basic authentication
authentication = ('john@doe.com','Warp_ExtrapolationsForfeited2')

# Use the correct function argument to pass the authentication tuple to the API
response = requests.get('http://localhost:3000/albums', auth=authentication)

if(response.status_code == 200):
    print("Success!")
elif(response.status_code == 401):
    print('Authentication failed')
else:
    print('Another error occurred')
```
> `auth` ì¸ìë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

> `auth` ì¸ìì— (user,password) íŠœí”Œì„ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.

##### âœ… 2. API key authentication with requests - `headers`, `params`

**1) `headers = {'Authorization' : Bearer APIKEY}`**

```python
# Create a headers dictionary containing and set the API key using the correct key and value 
headers = {'Authorization': 'Bearer 8apDFHaNJMxy8Kt818aa6b4a0ed0514b5d3'}

# Add the headers dictionary to the requests.get() call using the correct function argument
response = requests.get('http://localhost:3000/albums', headers=headers)

if(response.status_code == 200):
    print("Success!")
elif(response.status_code == 401):
    print('Authentication failed')
else:
    print('Another error occurred')
```
> `headers` ì¸ìë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

> headers = {`Authorization` : `Bearer APIKEY`} ë¥¼ í™œìš©í•˜ë©´ ë©ë‹ˆë‹¤. 


**2) `params = {'access_token' : TOKENKEY}`**

```python
# Create a dictionary containing the API key using the correct key-value combination
params = {'access_token': '8apDFHaNJMxy8Kt818aa6b4a0ed0514b5d3'}

# Add the dictionary to the requests.get() call using the correct function argument
response = requests.get('http://localhost:3000/albums', params=params)

if(response.status_code == 200):
    print("Success!")
elif(response.status_code == 401):
    print('Authentication failed')
else:
    print('Another error occurred')
```
> `params` ì¸ìë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

> params = {`access_token`: `TOKEN_KEY`} ë¥¼ í™œìš©í•˜ë©´ ë©ë‹ˆë‹¤.


### 2. êµ¬ì¡°í™” ë°ì´í„°(JSON) ë‹¤ë£¨ê¸°

#### 1) JSON ì˜ ì¥ì 
- ì†ì„±, ë¦¬ìŠ¤íŠ¸ ë“± ë³µì¡í•œ ë°ì´í„°ë¥¼ í‘œí˜„ í•  ìˆ˜ ìˆë‹¤.
- ê²½ëŸ‰ í¬ë§·ì´ê³ , ì–¸ì–´ ë…ë¦½ì ì´ë©° ê°€ë…ì„±ì´ ì¢‹ë‹¤.(human-readable)

#### 2) Python â†” JSON ë³€í™˜ : `dumps()`, `loads()`
```python
import json

# Python â†’ JSON
json_str = json.dumps({'title': 'Album', 'artist': 'Queen'})

# JSON â†’ Python
data = json.loads(json_str)
```

#### 3) requestsë¡œ JSON ì²˜ë¦¬
```python
# JSON ì‘ë‹µ ë°›ê¸°
headers = {'accept': 'application/json'}
response = requests.get(url, headers=headers)
data = response.json()  # Python dict ë³€í™˜

# JSON ë°ì´í„° ì „ì†¡
playlist = {"title": "My Playlist", "songs": ["Song1", "Song2"]}
response = requests.post(url, json=playlist)  # ìë™ ì¸ì½”ë”© & ìë™ Content-Type ì„¤ì •
```

### 3. ì—ëŸ¬ ì²˜ë¦¬(Error Handling)

#### 1) ìƒíƒœ ì½”ë“œ ë²”ìœ„
- `4xx` : í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ â†’ ìš”ì²­ì´ ì˜ëª»ë¨
- `5xx` : ì„œë²„ ì˜¤ë¥˜ â†’ ì„œë²„ ë‚´ë¶€ ë¬¸ì œ

#### 2) ì£¼ìš” ì½”ë“œ

| ì½”ë“œ  | ì˜ë¯¸     | ëŒ€ì²˜          |
| --- | ------ | ----------- |
| 401 | ì¸ì¦ í•„ìš”  | ì¸ì¦ ì •ë³´ ì¶”ê°€    |
| 404 | ë¦¬ì†ŒìŠ¤ ì—†ìŒ | URL/íŒŒë¼ë¯¸í„° í™•ì¸ |
| 429 | ìš”ì²­ ê³¼ë‹¤  | ìš”ì²­ ê°„ê²© ëŠ˜ë¦¬ê¸°   |
| 500 | ì„œë²„ ì˜¤ë¥˜  | ì¬ì‹œë„ ë¡œì§ ì¶”ê°€   |

#### 3) ì˜ˆì™¸ ì²˜ë¦¬ íŒ¨í„´

```python
# Import the correct exception class
from requests.exceptions import HTTPError,ConnectionError

url ="http://localhost:3000/albums/"
try: 
    r = requests.get(url) 
    r.raise_for_status() # Enable raising errors for all error status_codes
    print(r.status_code)

#intercept the connection error
except ConnectionError as conn_err:
    print(f'ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜ ë°œìƒ : {conn_err}')

# Intercept the http error 
except HTTPError as http_err:
    print(f'HTTP ì˜¤ë¥˜ ë°œìƒ: {http_err}')
```

### 4) ì‹¤ë¬´ íŒ
- API KEY ëŠ” `.env` ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬(í•˜ë“œì½”ë”© ê¸ˆì§€)
- API í˜¸ì¶œ ë¡œê·¸ì— **ì‘ë‹µ ì†ë„, ìƒíƒœ ì½”ë“œ, ì‘ë‹µ í˜•ì‹** ê¸°ë¡
- 429(Too Many Requests) ë°©ì§€ë¥¼ ìœ„í•´ `time.sleep()` í™œìš©

    ```python
    while True:
    params = {'page': page_number, 'per_page': 500}
    response = requests.get('http://localhost:3000/tracks', params=params, headers=headers)
    response.raise_for_status()
    response_data = response.json()
    
    print(f'Fetching tracks page {page_number}')

    if len(response_data['results']) == 0:
        break

    for track in response_data['results']:
        if(track['Length'] > longestTrackLength):
            longestTrackLength = track['Length']
            longestTrackTitle = track['Name']

    page_number = page_number + 1
    
    # To avoid 429 Client Error indicating we are sending too many requests to the server in a short amount of time.
    time.sleep(3)

    print('The longest track in my music library is: ' + longestTrackTitle)
    ```

### ë§ˆë¬´ë¦¬
ì´ë²ˆ ê¸€ì—ì„œëŠ” APIë¥¼ ì•ˆì „í•˜ê³  ì•ˆì •ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì„¸ ê°€ì§€ í•µì‹¬ ìš”ì†Œë¥¼ ë°°ì› ìŠµë‹ˆë‹¤.
1) **ì¸ì¦(Authentication)** ìœ¼ë¡œ ë³´ì•ˆì„ ê°•í™”í•˜ê³ ,
2) **êµ¬ì¡°í™” ë°ì´í„°(JSON)** ë¡œ ë³µì¡í•œ ì •ë³´ë¥¼ ì£¼ê³ ë°›ì•˜ìœ¼ë©°,
3) **ì—ëŸ¬ì²˜ë¦¬(Error Handling)** ë¡œ ì˜ˆì™¸ ìƒí™©ì„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´ì œ, ë‹¨ìˆœ ìš”ì²­ì„ ë„˜ì–´ì„œ **ì‹¤ë¬´ ìˆ˜ì¤€ì˜ API í†µí•©**ì„ êµ¬í˜„í•  ì¤€ë¹„ë¥¼ ê°–ì¶˜ ê²ƒì´ì£ !ğŸš€

<hr>














































